#!/usr/bin/env node --harmony
const program = require('commander'),
      colors = require('colors');
      pack = require('../package.json');

program
  .option('-d, --deploy', 'Deploys the git repository to a remote server.')
  .option('-i, --init', 'This will generate a sample, nextd.json.')
  .option('-sa, --stopall', 'Stop all applications to a remove server.')
  .option('-s, --start', 'Start application to a remove server.')
  .version(pack.version)
  .on('--help', function(){
    console.log('')
    console.log('Examples:');
    console.log('  $ nextd --deploy');
    console.log('  $ nextd -h');
  }).parse(process.argv);


(() => {
  // deploy...
  if (program.deploy) {
    const deploy = require('../scripts/deploy');
    return deploy();
  }

  if (program.init) {
    const init = require('../scripts/init');
    return init();
  }

  if (program.stopall) {
    const run = require('../scripts/run');
    return run('stopAll');
  }

  if (program.start) {
    const run = require('../scripts/run');
    return run('start');
  }

  // empty options
  if (!process.argv.slice(2).length) {
    program.outputHelp((txt) => colors.red(txt));
  }
})();
